import re


def readFile(filename):
    txt = ""
    with open(filename, "r") as f:
        txt = f.readlines()
    return txt


def matchid(alltxt, other):
    lenother = len(other)
    alltxt = "".join(alltxt)
    '''match id'''
    m = r"Successfully triggered bug (\d+)"
    res = re.findall(m, alltxt)
    res = res + other
    res = set(res)
    res = list(res)
    res.sort()
    return res, len(res), lenother


'''base64'''
# 37
base64l = ['1', '222', '235', '276', '278', '554', '556', '558', '560', '562', '566', '572', '573', '576', '582', '583',
           '584', '774', '776', '778', '780', '782', '784', '786', '788', '790', '792', '805', '806', '813', '815',
           '817', '831', '832', '835', '842', '843']
base64txt = readFile("crashes_base64.csv")

'''md5sum'''
# 34
md5suml = ['1', '10', '2', '270', '271', '273', '274', '276', '277', '284', '286', '306', '308', '314', '317', '320',
           '323', '326', '332', '335', '341', '347', '353', '356', '359', '362', '365', '368', '371', '374', '380',
           '547', '563', '9']
md5sumtxt = readFile("crashes_md5sum.csv")

# '''uniq'''
# 6
uniql = ['112', '169', '297', '346', '372', '397']
uniqtxt = readFile("crashes_uniq.csv")

# '''who'''
# 141
whol = ['119', '150', '18', '20', '3771', '3772', '3773', '3774', '3775', '3776', '3777', '3778', '3779', '3780',
        '3781', '3782', '3783', '3784', '3785', '3786', '3787', '3788', '3942', '3943', '3944', '3945', '3946', '3947',
        '3948', '3949', '3950', '3951', '3952', '3953', '3954', '3955', '3956', '3957', '3958', '3959', '3960', '3961',
        '3962', '3963', '3964', '3965', '3966', '3967', '3968', '3969', '3970', '3971', '3972', '3973', '3974', '3975',
        '3976', '3977', '3978', '3979', '3980', '3981', '3982', '3983', '3984', '3985', '3986', '4140', '4141', '4142',
        '4143', '4144', '4145', '4146', '4147', '4148', '4149', '4150', '4151', '4152', '4153', '4154', '4155', '4156',
        '4157', '4158', '4159', '4160', '4161', '4162', '4163', '4164', '4165', '4166', '4167', '4168', '4169', '4170',
        '4171', '4172', '4173', '4174', '4175', '4176', '4177', '4178', '4179', '4180', '4181', '4182', '4183', '4184',
        '4338', '4339', '4340', '4341', '4342', '4343', '4344', '4345', '4346', '4347', '4348', '4349', '4350', '4351',
        '4352', '4353', '4354', '4355', '4356', '4357', '4358', '4359', '4360', '4361', '4362', '4363', '4364', '5',
        '6']
whotxt = readFile("crashes_who.csv")

if __name__ == "__main__":
    b1, b2, b3 = matchid(base64txt, base64l)
    m1, m2, m3 = matchid(md5sumtxt, md5suml)
    u1, u2, u3 = matchid(uniqtxt, uniql)
    w1, w2, w3 = matchid(whotxt, whol)

    print("base64-{} md5sum-{} uniq-{} who-{}".format(b2, m2, u2, w2))
    print(m1)
